(this.webpackJsonpsamurai=this.webpackJsonpsamurai||[]).push([[2],{437:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(3),s=t(13),r=t(0),o=t.n(r),i=t(199),c=t(581),l=t(569),m=t(587),d=t(570),p=["text","email","search","password","textarea"],g=Object(i.a)((function(e){return{textInput:{marginBottom:25,"& .MuiFormHelperText-root":Object(s.a)({fontSize:10,position:"absolute",bottom:0,transform:"translateY(100%)"},e.breakpoints.up("sm"),{fontSize:12})}}})),u=function(e){var a=e.input,t=e.label,s=e.type,r=e.meta,i=r.touched,u=r.error,b=Object(n.a)(e,["input","label","type","meta"]),f=g();return o.a.createElement(o.a.Fragment,null,p.includes(s)&&o.a.createElement(c.a,Object.assign({error:i&&Boolean(u),helperText:i&&u?u:"",label:t,type:s,fullWidth:!0,className:f.textInput},a,b)),"checkbox"===s&&o.a.createElement(l.a,{className:f.textInput,control:o.a.createElement(m.a,{checked:!!a.value,onChange:a.onChange}),label:t}),"switch"===s&&o.a.createElement(l.a,{className:f.textInput,control:o.a.createElement(d.a,{checked:!!a.value,onChange:a.onChange}),label:t}))}},440:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n=t(78),s=t(57),r=t(131),o=t(132),i=t(133),c=t(0),l=t.n(c),m=t(70),d=t(61),p=t(72),g=t(25),u=function(e){return{isAuth:Object(p.e)(e)}},b=function(e){var a=function(a){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(i.a)(t,a),Object(s.a)(t,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(m.a,{to:g.a.login.path})}}]),t}(c.Component);return Object(d.b)(u)(a)}},544:function(e,a,t){e.exports=t.p+"static/media/read.3f77ca25.svg"},545:function(e,a,t){e.exports=t.p+"static/media/unread.4cd435c4.svg"},546:function(e,a,t){e.exports=t.p+"static/media/chat-bg.6cc5a933.svg"},582:function(e,a,t){"use strict";t.r(a);var n=t(3),s=t(0),r=t.n(s),o=t(30),i=t(197),c=t(72),l=t(61),m=t(440),d=t(48),p=t(13),g=t(41),u=t(128),b=t.n(u),f=t(378),h=t(572),v=t(434),x=t(418),E=t(430),w=t(25),y=t(65),j=t.n(y),O=t(204),I=t(11),k=Object(O.a)((function(e){return{dialog:{"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(e.palette.grey[200])}},active:{background:"#efefef"},newMessages:Object(p.a)({background:e.palette.secondary.main,color:e.palette.common.white,height:20,display:"flex",padding:"0 6px",zIndex:1,position:"absolute",flexWrap:"wrap",fontSize:11,minWidth:20,boxSizing:"border-box",alignItems:"center",fontWeight:500,lineHeight:1,alignContent:"center",borderRadius:10,flexDirection:"row",right:10},e.breakpoints.up(769),{right:2}),date:{fontSize:12,color:e.palette.grey[400]},openIcon:Object(p.a)({transform:"scale(-1)",color:e.palette.primary.light,width:21},e.breakpoints.up(769),{display:"none"}),withNewMessages:Object(p.a)({paddingRight:35},e.breakpoints.up(769),{paddingRight:25})}})),M=Object(I.a)(k,{withTheme:!0}),N=t(35),S=M((function(e){var a=e.classes,t=e.user,n=t.id,s=t.userName,o=t.photos,i=t.hasNewMessages,c=t.newMessagesCount,l=t.lastDialogActivityDate,m=new Date(l).toLocaleDateString(),d=null!==o.small?o.small:b.a;return r.a.createElement(f.a,{button:!0,component:g.b,to:w.a.dialogs.getPath(n),activeClassName:a.active,className:j()(a.dialog,Object(p.a)({},a.withNewMessages,c>0))},r.a.createElement(h.a,null,r.a.createElement(v.a,{src:d,alt:s,sizes:"40"})),r.a.createElement(x.a,{primary:"@"+s,secondary:m,primaryTypographyProps:{noWrap:!0},classes:{secondary:a.date}}),i&&r.a.createElement("span",{className:a.newMessages}," ",c>99?"99+":c),r.a.createElement(E.a,{mdUp:!0},!i&&r.a.createElement(N.u,{className:a.openIcon})))})),D=t(27),z=t(56),L=t(542),T=t(76),R=t(433),B=t(573),C=t(574),F=t(575),U=t(544),W=t.n(U),$=t(545),A=t.n($),P=Object(O.a)((function(e){return{message:Object(p.a)({marginBottom:25,fontSize:16,fontWeight:400,position:"relative",maxWidth:"80%",display:"flex",alignItems:"flex-end"},e.breakpoints.up("sm"),{marginBottom:30}),avatar:{height:40,width:40},messageSended:{alignSelf:"flex-end",paddingLeft:22,flexDirection:"row-reverse","& $messageItem":{background:"#3d4977",color:"#fff",borderBottomRightRadius:0},"& $avatar":{marginLeft:10},"& $viewedIcon":{right:55},"& $actionBtn":{left:0},"& $date":{right:50}},messageRecieved:{paddingRight:22,"& $messageItem":{background:"#efefef",borderBottomLeftRadius:0},"& $avatar":{marginRight:10},"& $viewedIcon":{left:55,filter:"invert(0.5)"},"& $actionBtn":{right:0},"& $date":{left:50}},messageInactive:{"& $messageItem":{background:"#eee",color:"grey",fontSize:"12px"},"& $viewedIcon":{display:"none"}},messageItem:{fontSize:"0.9rem",padding:"9px 15px",borderRadius:"10px"},viewedIcon:{position:"absolute",bottom:"2px",height:"12px"},messageIcon:{maxWidth:17,maxHeight:17,opacity:"0.5"},actionBtn:{cursor:"pointer",width:20,height:20,position:"absolute",background:"transparent",padding:2,boxSizing:"border-box",border:"none",display:"flex",alignItems:"center","&:hover $messageIcon":{opacity:1}},delete:{top:0},restore:{top:0,bottom:0,margin:"auto 0"},spam:{top:20},date:Object(p.a)({position:"absolute",bottom:"-20px",fontSize:11,color:e.palette.grey[400],letterSpacing:"-0.4px",whiteSpace:"nowrap"},e.breakpoints.up(480),{fontSize:12})}})),G=Object(I.a)(P,{withTheme:!0})((function(e){var a=e.message,t=e.deleteMessage,n=e.spamMessage,s=e.restoreMessage,o=e.deletedMessages,i=e.spamedMessages,c=e.selectedFriend,l=e.currentUserInfo,m=e.classes,d=a.addedAt,p=a.body,u=a.id,f=a.senderId,h=a.viewed,x=o.includes(u),E=i.includes(u),y=x||E,O=f===l.userId,I=function(e){return new Date(e).toLocaleTimeString().split(":").slice(0,-1).join(":")}(d),k=x?"Message was deleted":"Message added to spam";return r.a.createElement("div",{className:j()(m.message,O?m.messageSended:m.messageRecieved,y?m.messageInactive:"")},r.a.createElement(v.a,{component:g.b,to:w.a.profile.getPath(f),src:!O&&c?c.photos.small||b.a:O&&l.photos.small||b.a,alt:"avatar",sizes:"40",className:m.avatar}),r.a.createElement(T.a,{variant:"body2",className:m.messageItem,component:"div"},y?k:r.a.createElement(L.a,null,p)),r.a.createElement("img",{src:h?W.a:A.a,alt:"",className:m.viewedIcon}),r.a.createElement("div",{className:m.date},I),!y&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:j()(m.actionBtn,m.delete),onClick:function(){return t(u)}},r.a.createElement(R.a,{title:"Delete","aria-label":"Delete"},r.a.createElement(B.a,{color:"primary",className:m.messageIcon}))),!O&&r.a.createElement("button",{className:j()(m.actionBtn,m.spam),onClick:function(){return n(u)}},r.a.createElement(R.a,{title:"Spam","aria-label":"Spam"},r.a.createElement(C.a,{color:"primary",className:m.messageIcon})))),y&&r.a.createElement("button",{className:j()(m.actionBtn,m.restore),onClick:function(){return s(u)}},r.a.createElement(R.a,{title:"Restore","aria-label":"Restore"},r.a.createElement(F.a,{color:"primary",className:m.messageIcon}))))})),H=t(241),J=t(242),Y=t(437),q=t(419),K=Object(O.a)((function(e){return{form:Object(p.a)({display:"flex",backgroundColor:"#f3f5f7",padding:10},e.breakpoints.up(769),{padding:30}),root:{flexGrow:1,marginBottom:0},textarea:Object(p.a)({borderRadius:0,backgroundColor:"white"},e.breakpoints.down(769),{padding:"10px 14px"}),button:{height:"100%",borderRadius:0}}})),Q=Object(I.a)(K,{withTheme:!0}),V=Object(J.a)({form:"message"})(Q((function(e){var a=e.handleSubmit,t=e.submitting,n=e.classes;return r.a.createElement("form",{className:n.form,onSubmit:a},r.a.createElement(H.a,{name:"message",type:"textarea",component:Y.a,placeholder:"Type message...",required:!0,classes:{root:n.root},InputProps:{className:n.textarea},variant:"outlined",multiline:!0,rowsMax:"2"}),r.a.createElement(q.a,{type:"submit",disabled:t,className:n.button,color:"primary",variant:"contained"},r.a.createElement(N.G,null)))}))),X=t(91),Z=t(413),_=t(410),ee=t(455),ae=Object(O.a)((function(e){var a;return{head:(a={display:"flex",alignItems:"center",fontSize:"12px",position:"absolute",top:0,left:0,right:0,padding:"5px 30px 5px 47px",zIndex:2,backgroundColor:e.palette.common.white},Object(p.a)(a,e.breakpoints.up(769),{padding:"11px 30px"}),Object(p.a)(a,"&::after",{position:"absolute",bottom:"0",left:"0",right:"0",content:"''",height:"1px",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.2)"}),a),headInfo:{marginLeft:15,flexGrow:1},headLink:{color:e.palette.text.primary,"&:hover":{color:e.palette.primary.main}},headDate:Object(p.a)({color:e.palette.grey[400]},e.breakpoints.down(480),{fontSize:11}),back:Object(p.a)({position:"absolute",left:0},e.breakpoints.up(769),{display:"none"})}})),te=Object(I.a)(ae,{withTheme:!0})((function(e){var a=e.classes,t=e.lastUserActivityDate,n=e.selectedFriend,s=e.messagesLoading;return r.a.createElement("div",{className:a.head},r.a.createElement(E.a,{mdUp:!0},r.a.createElement(Z.a,{color:"primary","aria-label":"Back",edge:"end",component:g.b,className:a.back,to:w.a.dialogs.getPath(null)},r.a.createElement(N.u,null))),s?r.a.createElement(ee.a,{animation:"wave",variant:"circle",height:40,width:40}):r.a.createElement(v.a,{src:n.photos.small||b.a,component:g.b,to:w.a.profile.getPath(n.userId),alt:"avatar",sizes:"40"}),r.a.createElement("div",{className:a.headInfo},s?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{animation:"wave",width:"80%",className:"MuiTypography-subtitle1"}),r.a.createElement(ee.a,{animation:"wave",width:"50%",height:13,className:"MuiTypography-body2"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{component:g.b,to:w.a.profile.getPath(n.userId),underline:"none",className:a.headLink},r.a.createElement(T.a,{variant:"subtitle1",component:"h6"},n.fullName)),t&&r.a.createElement("div",{className:a.headDate},"Was here: ",new Date(t).toLocaleString()))))})),ne=Object(O.a)((function(e){return{chat:{position:"relative",paddingTop:"68px",display:"flex",flexDirection:"column",height:"100%"},chatWrapper:{position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-start",flexGrow:1,overflowY:"auto",padding:"0 10px 20px"},date:Object(p.a)({color:e.palette.grey[400],margin:"5px auto"},e.breakpoints.up("sm"),{margin:"15px auto"})}})),se=Object(I.a)(ne,{withTheme:!0})((function(e){var a=e.classes,t=e.friendId,n=e.messages,o=e.deleteMessage,i=e.spamMessage,c=e.lastUserActivityDate,l=e.restoreMessage,m=e.getMessages,d=e.sendMessage,p=e.deletedMessages,g=e.spamedMessages,u=e.selectedFriend,b=e.currentUserInfo,f=e.messagesLoading,h=Object(s.useState)([]),v=Object(z.a)(h,2),x=v[0],E=v[1];Object(s.useEffect)((function(){t&&void 0!==t&&m(t)}),[t]),Object(s.useEffect)((function(){!function(){var e={};n.map((function(a){var t=new Date(a.addedAt).toLocaleDateString();e[t]?e[t]=[].concat(Object(D.a)(e[t]),[a]):e[t]=[a]}));var a=[];Object.entries(e).map((function(e){a=[].concat(Object(D.a)(a),[{date:e[0],messages:e[1]}])})),E(a)}()}),[n]),Object(s.useEffect)((function(){f||w()}),[f,x]);var w=function(){var e=document.getElementById("wrapper");e&&e.scroll(0,e.scrollHeight-e.clientHeight)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.chat},u&&r.a.createElement(te,{lastUserActivityDate:c,selectedFriend:u,messagesLoading:f}),r.a.createElement("div",{className:a.chatWrapper,id:"wrapper"},f?r.a.createElement(X.a,{showPreloader:!0}):x.map((function(e){var t=e.date,n=e.messages;return r.a.createElement(s.Fragment,{key:t},r.a.createElement("div",{className:a.date},t),n.map((function(e){return r.a.createElement(G,{key:e.id,message:e,deleteMessage:o,spamMessage:i,restoreMessage:l,deletedMessages:p,spamedMessages:g,selectedFriend:u,currentUserInfo:b})})))}))),r.a.createElement(V,{onSubmit:function(e){var a=e.message;d(t,a)}})))})),re=t(122),oe=t(408),ie=t(546),ce=t.n(ie),le=Object(O.a)((function(e){return{empty:{width:"100%",height:"100%",padding:30,display:"flex",flexDirection:"column"},emptyImg:{background:"url(".concat(ce.a,") no-repeat center"),backgroundSize:"contain",flexGrow:1},emptyText:{margin:"30px 0",textAlign:"center"}}})),me=Object(I.a)(le,{withTheme:!0})((function(e){var a=e.classes;return r.a.createElement("div",{className:a.empty},r.a.createElement("div",{className:a.emptyImg}),r.a.createElement(E.a,{mdDown:!0},r.a.createElement("div",{className:a.emptyText},r.a.createElement(T.a,{variant:"h6"},"Select conversation to display"),r.a.createElement(T.a,{variant:"body2"},"To start a new conversation just click the message button from a person profile"))))})),de=Object(O.a)((function(e){var a;return{root:Object(p.a)({flexGrow:1,padding:"20px 0",display:"flex",alignItems:"center"},e.breakpoints.up("md"),{padding:"20px 0"}),paper:{width:"100%",height:"calc(100vh - 130px)",display:"flex",background:"#ffffff",borderRadius:0,position:"relative"},list:(a={borderRight:"1px solid #eeeeee",backgroundColor:e.palette.background.paper,overflow:"auto",maxHeight:"100%",padding:0},Object(p.a)(a,e.breakpoints.down(769),{background:"rgba(255, 255, 255, 0.8)",position:"absolute",left:0,width:"100%",top:0,bottom:0,zIndex:2}),Object(p.a)(a,e.breakpoints.up(769),{width:250,minWidth:250}),Object(p.a)(a,e.breakpoints.up("md"),{width:300,minWidth:300}),a),hiddenList:Object(p.a)({},e.breakpoints.down(769),{left:"calc(-100% - 30px)"}),content:{flexGrow:1,position:"relative"}}})),pe=Object(I.a)(de,{withTheme:!0})((function(e){var a=e.classes,t=e.messages,n=e.deletedMessages,s=e.dialogs,o=e.sendMessage,i=e.getMessages,c=e.deleteMessage,l=e.spamMessage,m=e.lastUserActivityDate,d=e.restoreMessage,g=e.spamedMessages,u=e.selectedFriend,b=e.currentUserInfo,f=e.friendId,h=e.messagesLoading;return r.a.createElement("div",{className:a.root},r.a.createElement(re.a,{className:a.paper,elevation:3},r.a.createElement(oe.a,{className:j()(a.list,Object(p.a)({},a.hiddenList,f)),component:"div"},s.map((function(e){return r.a.createElement(S,{key:e.id,user:e})}))),r.a.createElement("div",{className:a.content},b&&f?r.a.createElement(se,{messagesLoading:h,deletedMessages:n,spamedMessages:g,messages:t,friendId:f,sendMessage:o,getMessages:i,deleteMessage:c,spamMessage:l,lastUserActivityDate:m,restoreMessage:d,selectedFriend:u,currentUserInfo:b}):r.a.createElement(me,null))))})),ge=t(70);a.default=Object(d.d)(Object(l.b)((function(e){return{messages:Object(i.d)(e),dialogs:Object(i.b)(e),lastUserActivityDate:Object(i.c)(e),deletedMessages:Object(i.a)(e),spamedMessages:Object(i.h)(e),selectedFriend:Object(i.g)(e),currentUserInfo:Object(c.c)(e),messagesLoading:Object(i.e)(e)}}),{sendMessage:o.s,getDialogs:o.n,getMessages:o.o,deleteMessage:o.m,spamMessage:o.z,restoreMessage:o.r}),m.a)((function(e){var a=e.getDialogs,t=Object(n.a)(e,["getDialogs"]),o=Object(ge.i)().id;return Object(s.useEffect)((function(){a()}),[]),r.a.createElement(pe,Object.assign({},t,{friendId:Number(o)}))}))}}]);
//# sourceMappingURL=MessagesContainer.7ae31235.chunk.js.map